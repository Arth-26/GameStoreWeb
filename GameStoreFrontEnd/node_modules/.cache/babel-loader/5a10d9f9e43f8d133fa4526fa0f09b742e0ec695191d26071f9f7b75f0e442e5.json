{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"mt-2\"\n}, \"Game Registration\", -1 /* HOISTED */);\nconst _hoisted_2 = {\n  class: \"form-group\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"mt-3 mb-3\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-primary\"\n}, \"Save\")], -1 /* HOISTED */);\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"form\", {\n    onSubmit: _cache[5] || (_cache[5] = _withModifiers((...args) => _ctx.updateGame && _ctx.updateGame(...args), [\"prevent\"])),\n    class: \"m-5\"\n  }, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [_withDirectives(_createElementVNode(\"input\", {\n    id: \"nome\",\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.nome = $event),\n    class: \"form-control\",\n    placeholder: \"Game name\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.nome]])]), _createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    id: \"categoria\",\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.categoria = $event),\n    class: \"form-control\",\n    placeholder: \"Game category\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.categoria]])]), _createElementVNode(\"div\", _hoisted_4, [_withDirectives(_createElementVNode(\"input\", {\n    id: \"preco\",\n    type: \"number\",\n    step: \".01\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.preco = $event),\n    class: \"form-control\",\n    placeholder: \"0.0\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.preco]])]), _createElementVNode(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"input\", {\n    id: \"data_de_lancamento\",\n    type: \"date\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => _ctx.data_de_lancamento = $event),\n    class: \"form-control\",\n    placeholder: \"Release Date\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.data_de_lancamento]])]), _createElementVNode(\"div\", _hoisted_6, [_withDirectives(_createElementVNode(\"input\", {\n    id: \"description\",\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => _ctx.description = $event),\n    class: \"form-control\",\n    placeholder: \"Game description\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.description]])]), _hoisted_7], 32 /* NEED_HYDRATION */)]);\n}","map":{"version":3,"names":["_createElementVNode","class","type","_createElementBlock","onSubmit","_cache","_withModifiers","args","_ctx","updateGame","_hoisted_1","_hoisted_2","id","nome","$event","placeholder","_hoisted_3","categoria","_hoisted_4","step","preco","_hoisted_5","data_de_lancamento","_hoisted_6","description","_hoisted_7"],"sources":["C:\\Users\\Arthur\\gamestore\\src\\components\\GameDetail.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <form @submit.prevent=\"updateGame\" class=\"m-5\">\r\n            <h2 class=\"mt-2\">Game Registration</h2>\r\n            <div class=\"form-group\">\r\n                <input id=\"nome\" type=\"text\" v-model=\"nome\" class=\"form-control\" placeholder=\"Game name\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <input id=\"categoria\" type=\"text\" v-model=\"categoria\" class=\"form-control\"\r\n                    placeholder=\"Game category\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <input id=\"preco\" type=\"number\" step=\".01\" v-model=\"preco\" class=\"form-control\" placeholder=\"0.0\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <input id=\"data_de_lancamento\" type=\"date\" v-model=\"data_de_lancamento\" class=\"form-control\"\r\n                    placeholder=\"Release Date\">\r\n            </div>\r\n            <div class=\"form-group\">\r\n                <input id=\"description\" type=\"text\" v-model=\"description\" class=\"form-control\"\r\n                    placeholder=\"Game description\">\r\n            </div>\r\n            <div class=\"mt-3 mb-3\">\r\n                <button type=\"submit\" class=\"btn btn-primary\">Save</button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport router from '../router'\r\n\r\nexport default {\r\n    name: 'GameDetail',\r\n    data() {\r\n        return {\r\n            baseUrl: 'http://localhost:8080',\r\n\r\n            result: [],\r\n            originalList: [],\r\n\r\n            game: { \r\n                id: '',\r\n                nome: '',\r\n                preco: '',\r\n                data_de_lancamento: '',\r\n                categoria: '',\r\n                description: '',\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        // Extrai o id do parÃ¢metro da URL usando a biblioteca `vue-router`\r\n        const gameId = this.$route.params.id\r\n        if (gameId) {\r\n            this.getGame(gameId)\r\n        }\r\n    },\r\n    methods: {\r\n        cloneGame(game) {\r\n            return JSON.parse(JSON.stringify(game))\r\n        },\r\n        async getGameList() {\r\n            try {\r\n                const response = await fetch('http://localhost:8080/games');\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! Status: ${response.status}`);\r\n                }\r\n\r\n                const data = await response.json();\r\n                this.result = data;\r\n                this.originalList = data.map(p => ({ ...p }));\r\n            } catch (error) {\r\n                alert('Error loading games!');\r\n                console.error(error);\r\n            }\r\n        },\r\n        updateGame() {\r\n            const oldGame = this.originalList.find(p => p.id === this.id)\r\n            const formData = new FormData()\r\n            const updatedFields = {}\r\n\r\n            if (this.nome !== oldGame.nome) {\r\n                formData.append('nome', this.nome)\r\n                updatedFields.nome = this.nome\r\n            }\r\n\r\n            if (this.categoria !== oldGame.categoria) {\r\n                formData.append('categoria', this.categoria)\r\n                updatedFields.categoria = this..categoria\r\n            }\r\n\r\n            if (this.preco !== oldGame.preco) {\r\n                formData.append('preco', this.preco)\r\n                updatedFields.preco = parseFloat(this.preco)\r\n            }\r\n\r\n            if (this.data_de_lancamento !== oldGame.data_de_lancamento) {\r\n                formData.append('data_de_lancamento', this.data_de_lancamento)\r\n                updatedFields.data_de_lancamento = this.game.categoria\r\n            }\r\n\r\n            if (this.description !== oldGame.description) {\r\n                formData.append('description', this.description)\r\n                updatedFields.description = this.description\r\n            }\r\n\r\n            const index = this.result.findIndex((game) => game.id === this.game.id)\r\n            if (index !== -1) {\r\n                const updatedgame = { ...this.result[index] }\r\n                updatedgame.nome = updatedFields.nome || updatedgame.nome\r\n                updatedgame.categoria = updatedFields.categoria || updatedgame.categoria\r\n                updatedgame.preco = updatedFields.preco || updatedgame.preco\r\n                updatedgame.data_de_lancamento = updatedFields.data_de_lancamento || updatedgame.data_de_lancamento\r\n                updatedgame.description = updatedFields.description || updatedgame.description\r\n\r\n                this.result.splice(index, 1, updatedgame)\r\n            }\r\n\r\n            fetch(`http://localhost:8080/games/${oldGame.id}`, {\r\n                method: 'PATCH',\r\n                body: formData,\r\n            })\r\n                .then(response => {\r\n                    if (!response.ok) {\r\n                        throw new Error(`HTTP error! Status: ${response.status}`);\r\n                    }\r\n                    return response.json();\r\n                })\r\n                .then(() => {\r\n                    alert('Game updated successfully!');\r\n                    const index = this.result.findIndex(p => p.id === this.game.id);\r\n                    if (index !== -1) {\r\n                        const updatedGame = { ...this.result[index], ...updatedFields };\r\n                        this.$set(this.result, index, updatedGame);\r\n                    }\r\n                    router.push('/games');\r\n                })\r\n                .catch((error) => {\r\n                    alert('Error updating game!')\r\n                    console.log(error)\r\n                })\r\n        },\r\n        getGame(gameId) {\r\n            \r\n            fetch(`http://localhost:8080/games/${gameId}`)\r\n                .then(response => {\r\n                    if (!response.ok) {\r\n                        throw new Error(`HTTP error! Status: ${response.status}`);\r\n                    }\r\n                    return response.json();\r\n                })\r\n                .then(data => {\r\n                    \r\n                    this.game= {\r\n                        id: data.id,\r\n                        nome: data.nome,\r\n                        categoria: data.categoria,\r\n                        preco: data.preco,\r\n                        data_de_lancamento: data.data_de_lancamento,\r\n                        description: data.description,\r\n                    };\r\n                })\r\n                .catch(error => {\r\n                    console.error(error);\r\n                });\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n</script>"],"mappings":";gCAGYA,mBAAA,CAAuC;EAAnCC,KAAK,EAAC;AAAM,GAAC,mBAAiB;;EAC7BA,KAAK,EAAC;AAAY;;EAGlBA,KAAK,EAAC;AAAY;;EAIlBA,KAAK,EAAC;AAAY;;EAGlBA,KAAK,EAAC;AAAY;;EAIlBA,KAAK,EAAC;AAAY;gCAIvBD,mBAAA,CAEM;EAFDC,KAAK,EAAC;AAAW,I,aAClBD,mBAAA,CAA2D;EAAnDE,IAAI,EAAC,QAAQ;EAACD,KAAK,EAAC;GAAkB,MAAI,E;;uBAtB9DE,mBAAA,CAyBM,cAxBFH,mBAAA,CAuBO;IAvBAI,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,IAAA,CAAAC,UAAA,IAAAD,IAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;IAAEN,KAAK,EAAC;MACrCS,UAAuC,EACvCV,mBAAA,CAEM,OAFNW,UAEM,G,gBADFX,mBAAA,CAAyF;IAAlFY,EAAE,EAAC,MAAM;IAACV,IAAI,EAAC,MAAM;+DAAUM,IAAA,CAAAK,IAAI,GAAAC,MAAA;IAAEb,KAAK,EAAC,cAAc;IAACc,WAAW,EAAC;iDAAvCP,IAAA,CAAAK,IAAI,E,KAE9Cb,mBAAA,CAGM,OAHNgB,UAGM,G,gBAFFhB,mBAAA,CACgC;IADzBY,EAAE,EAAC,WAAW;IAACV,IAAI,EAAC,MAAM;+DAAUM,IAAA,CAAAS,SAAS,GAAAH,MAAA;IAAEb,KAAK,EAAC,cAAc;IACtEc,WAAW,EAAC;iDAD2BP,IAAA,CAAAS,SAAS,E,KAGxDjB,mBAAA,CAEM,OAFNkB,UAEM,G,gBADFlB,mBAAA,CAAkG;IAA3FY,EAAE,EAAC,OAAO;IAACV,IAAI,EAAC,QAAQ;IAACiB,IAAI,EAAC,KAAK;+DAAUX,IAAA,CAAAY,KAAK,GAAAN,MAAA;IAAEb,KAAK,EAAC,cAAc;IAACc,WAAW,EAAC;iDAAxCP,IAAA,CAAAY,KAAK,E,KAE7DpB,mBAAA,CAGM,OAHNqB,UAGM,G,gBAFFrB,mBAAA,CAC+B;IADxBY,EAAE,EAAC,oBAAoB;IAACV,IAAI,EAAC,MAAM;+DAAUM,IAAA,CAAAc,kBAAkB,GAAAR,MAAA;IAAEb,KAAK,EAAC,cAAc;IACxFc,WAAW,EAAC;iDADoCP,IAAA,CAAAc,kBAAkB,E,KAG1EtB,mBAAA,CAGM,OAHNuB,UAGM,G,gBAFFvB,mBAAA,CACmC;IAD5BY,EAAE,EAAC,aAAa;IAACV,IAAI,EAAC,MAAM;+DAAUM,IAAA,CAAAgB,WAAW,GAAAV,MAAA;IAAEb,KAAK,EAAC,cAAc;IAC1Ec,WAAW,EAAC;iDAD6BP,IAAA,CAAAgB,WAAW,E,KAG5DC,UAEM,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}